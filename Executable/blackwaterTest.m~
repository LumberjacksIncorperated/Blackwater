//-----------------------------------------------------------------------------------------
//
// PROJECT
// -------
// The 'Blackwater' Project
//
// DESCRIPTION
// -----------
// OSX wifi jamming
//
// AUTHOR
// ------
// Lumberjacks Incorperated (2018)
//
//-----------------------------------------------------------------------------------------

//-----------------------------------------------------------------------------------------
//  INCLUDES
//-----------------------------------------------------------------------------------------
#import <stdio.h>

// Interface file
#import "blackwater.h"

// SR Library
#import "srLibrary.h"

//-----------------------------------------------------------------------------------------
//  FORWARD DECLARATIONS
//-----------------------------------------------------------------------------------------
void userListInterfaces(void);
void listClientsForJam(void);
void jamClient(void);
void runBlackwaterManager(void);
void printOptions(void);
void obtainUserChoice(int * userChoice);
void executeUserChoice(int userChoice);

//-----------------------------------------------------------------------------------------
//  DRIVER
//-----------------------------------------------------------------------------------------
int main(int argc, const char * argv[])
{
    runBlackwaterManager();
    return 0;
}

//-----------------------------------------------------------------------------------------
//  PRIVATE FUNCTIONS
//-----------------------------------------------------------------------------------------
void runBlackwaterManager(void)
{
    int userChoice = 0;
    
    while(userChoice != 4)
    {
        printOptions();
        obtainUserChoice(&userChoice);
        executeUserChoice(userChoice);
    }
}

void printOptions(void)
{
    printf("Options: \n");
    printf("1 - List Interfaces\n");
    printf("2 - List potential wifi jam clients\n");
    printf("3 - Jam wifi client\n");
    printf("4 - END.\n");
}

void obtainUserChoice(int * userChoice)
{
    scanf("%d", userChoice);
}

void executeUserChoice(int userChoice)
{
    switch (userChoice)
    {
        case 1:
            userListInterfaces();
            break;
            
        case 2:
            listClientsForJam();
            break;
            
        case 3:
            jamClient();
            break;
            
        case 4:
            return;
            
        default:
            printf("Invalid Option.\n");
            break;
    }
}

void userListInterfaces(void)
{
    blackwater * bw = [[blackwater alloc] init];
    [bw listInterfaces];
}

void listClientsForJam(void)
{
    blackwater * bw = [[blackwater alloc] init];
    [bw printClientList];
}

void jamClient(void)
{
    blackwater * bw = [[blackwater alloc] init];
    [bw jamWifiNetwork];
}
